<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tarjeta Digital — LUNA Grupo Inmobiliario</title>
  <meta name="theme-color" content="#0ea5e9" />
  <style>
    :root{
      --bg:#0b1220;
      --card:#121a2b;
      --muted:#9fb0c3;
      --ring:rgba(255,255,255,.12);
      --accent:#0ea5e9;
      --accent2:#8b5cf6;
      --white:#ffffff;
      --shadow:0 20px 60px rgba(0,0,0,.35);
      --radius:22px;
    }
    html,body{margin:0;height:100%;}
    body{
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
      color:var(--white);
      background: radial-gradient(900px 600px at 100% -10%, rgba(14,165,233,.25), transparent),
                  radial-gradient(900px 600px at -10% 110%, rgba(139,92,246,.25), transparent),
                  var(--bg);
      min-height:100%;
      display:flex;align-items:center;justify-content:center;
    }
    .wrap{width:min(720px,92vw);margin:40px auto;position:relative}
    .orb{position:absolute;border-radius:999px;filter:blur(64px);opacity:.8;pointer-events:none}
    .orb.a{width:420px;height:420px;right:-120px;top:-140px;background:radial-gradient(closest-side,var(--accent),transparent);animation:float1 6s ease-in-out infinite alternate}
    .orb.b{width:420px;height:420px;left:-120px;bottom:-160px;background:radial-gradient(closest-side,var(--accent2),transparent);animation:float2 8s ease-in-out infinite alternate}
    @keyframes float1{to{transform:translateY(18px) scale(1.05);opacity:.95}}
    @keyframes float2{to{transform:translateY(-18px) scale(1.05);opacity:.9}}
    .card{position:relative;background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.04));
      border:1px solid var(--ring); backdrop-filter: blur(10px);
      border-radius:var(--radius); padding:22px; box-shadow:var(--shadow);
      animation: rise .6s ease-out both;}
    @keyframes rise{from{opacity:0; transform:translateY(16px)} to{opacity:1; transform:translateY(0)}}
    .row{display:flex;gap:10px;align-items:center}
    .avatar{width:84px;height:84px;border-radius:18px;object-fit:cover;border:2px solid rgba(255,255,255,.18)}
    .brand{display:flex;gap:10px;align-items:center;justify-content:space-between;margin-bottom:14px}
    .actions{display:flex;gap:10px;align-items:center}
    .logo{width:160px;height:auto;object-fit:contain}
    .company{font-weight:600}
    .muted{color:var(--muted);font-size:12px}
    .name{font-size:26px;font-weight:800;margin:0}
    .role{margin:6px 0 0;font-size:13px;color:#cfe0f2}
    .grid{display:grid;grid-template-columns:repeat(2, minmax(0,1fr));gap:10px;margin-top:18px}
    .btn{display:flex;align-items:center;gap:10px;padding:12px 14px;border-radius:16px;border:1px solid var(--ring);
      background:rgba(255,255,255,.06); text-decoration:none; color:var(--white);
      transition:.25s transform, .25s background;}
    .btn:hover{transform:translateY(-2px); background:rgba(255,255,255,.12)}
    .primary{background:var(--white);color:#0b1220}
    .chip{background:rgba(255,255,255,.06)}
    .card2{margin-top:14px;padding:18px;border:1px solid var(--ring);border-radius:var(--radius);
      background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.03))}
    ul.info{list-style:none;padding:0;margin:12px 0 0}
    ul.info li{margin:6px 0;font-size:14px;color:#deecff}
    ul.info span{color:var(--muted)}
    .footer{margin:14px 0 0;text-align:center;color:var(--muted);font-size:12px}
    @media (max-width:520px){ .grid{grid-template-columns:1fr} .logo{width:120px} }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="orb a"></div>
    <div class="orb b"></div>
    <div class="brand">
      <div class="row">
        <img class="logo" src="logo_grupoluna_azul@4x.png" alt="logo LUNA">
        <div>
          <div class="company">LUNA Grupo Inmobiliario</div>
          <div class="muted">Tarjeta Digital</div>
        </div>
      </div>
      <div class="actions">
        <a class="btn chip" href="#" id="shareBtn" title="Compartir">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:18px;height:18px"><path d="M4 12v7a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7"/><path d="M16 6l-4-4-4 4"/><path d="M12 2v14"/></svg>
          <span>Compartir</span>
        </a>
        <a class="btn chip" id="avatarPhoto" href="#">Foto</a>
        <a class="btn chip" id="avatarLogo" href="#">Logo</a>
      </div>
    </div>
    <section class="card">
      <div class="row">
        <img class="avatar" src="Imagen1.jpg" alt="Orlando Alberto Fernandez Falconi">
        <div>
          <h1 class="name">Orlando Alberto Fernandez Falconi</h1>
          <p class="role">Gerente General</p>
        </div>
      </div>
      <div class="grid">
        <a class="btn" href="tel:5554961764">Llamar</a>
        <a class="btn" href="https://wa.me/525554961764" target="_blank" rel="noopener">WhatsApp</a>
        <a class="btn" href="mailto:GerenciaLUNAGrupoInm@gmail.com">Email</a>
        <a class="btn" href="https://lunagrupoinm.com/" target="_blank" rel="noopener">Sitio Web</a>
        <a class="btn" id="mapsBtn" href="#" target="_blank" rel="noopener">Ubicación</a>
      
<a class="btn" id="btnIG" href="#" target="_blank" rel="noopener">
  <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <rect x="3" y="3" width="18" height="18" rx="5"></rect>
    <circle cx="12" cy="12" r="4"></circle>
    <circle cx="17.5" cy="6.5" r="1"></circle>
  </svg>
  <span>Instagram</span>
</a>
<a class="btn" id="btnFacebook" href="#" target="_blank" rel="noopener">
  <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" aria-hidden="true">
    <path d="M13.5 9H16l.5-3h-3V4.5c0-.9.3-1.5 1.7-1.5H16V0h-2.3C11.2 0 10 1.8 10 4.2V6H8v3h2v9h3V9z"></path>
  </svg>
  <span>Facebook</span>
</a>
</div>
      <div class="row" style="gap:10px;margin-top:16px;flex-wrap:wrap">
        <a class="btn primary" id="saveVcf">Guardar contacto</a>
        <a class="btn chip" id="hostBtn" href="https://lunagrupoinm.com/" target="_blank" rel="noopener">lunagrupoinm.com</a>
      </div>
    </section>
    <section class="card2">
      <div class="muted">Contacto</div>
      <ul class="info">
        <li><span>Tel:</span> 5554961764</li>
        <li><span>Email:</span> GerenciaLUNAGrupoInm@gmail.com</li>
        <li><span>Ubicación:</span> <a href="https://maps.app.goo.gl/M5bFtkvP7BvrHLMG9" target="_blank" rel="noopener" style="color:#9fd1ff;text-decoration:underline">Ver en Google Maps</a></li>
        <li><span>Empresa:</span> LUNA Grupo Inmobiliario</li>
        <li><span>Cargo:</span> Gerente General</li>
      </ul>
    </section>
    <div class="footer">© <span id="year"></span> LUNA Grupo Inmobiliario. Todos los derechos reservados.</div>
  </div>
  <script>
    const profile = {
      nombre: 'Orlando Alberto Fernandez Falconi',
      empresa: 'LUNA Grupo Inmobiliario',
      cargo: 'Gerente General',
      telefono: '5554961764',
      whatsapp: '525554961764',
      email: 'GerenciaLUNAGrupoInm@gmail.com',
      sitio: 'https://lunagrupoinm.com/',
      mapsUrl: 'https://maps.app.goo.gl/M5bFtkvP7BvrHLMG9',
      instagram: 'https://instagram.com/AFernandezFal',
      facebook: 'https://facebook.com/AFernandezFal'};

    document.getElementById('year').textContent = new Date().getFullYear();

    const params = new URLSearchParams(location.search);
    function normalizeMode(v){
      if(!v) return null;
      v = v.toLowerCase();
      if(v==='logo') return 'logo';
      if(v==='foto' || v==='photo') return 'photo';
      return null;
    }

    let currentMode = 'photo';

    // Compartir con el modo actual en la URL
    const shareBtn = document.getElementById('shareBtn');
    shareBtn.addEventListener('click', async (e)=>{
      e.preventDefault();
      const u = new URL(location.href);
      u.searchParams.set('avatar', currentMode);
      const url = u.toString();
      const data = { title: profile.nombre, text: `${profile.nombre} — ${profile.cargo}`, url };
      try{ if(navigator.share){ await navigator.share(data); } else { await navigator.clipboard.writeText(url); shareBtn.querySelector('span').textContent = 'Copiado'; setTimeout(()=>shareBtn.querySelector('span').textContent='Compartir',1400);} }catch(err){}
    });

    // Maps
    const mapsBtn = document.getElementById('mapsBtn');
    mapsBtn.href = profile.mapsUrl;

    // vCard: agrega el modo de avatar en NOTE
    document.getElementById('saveVcf').addEventListener('click', ()=>{
      const vcf = `BEGIN:VCARD\nVERSION:3.0\nFN:${profile.nombre}\nORG:${profile.empresa}\nTITLE:${profile.cargo}\nTEL;TYPE=CELL:${profile.telefono}\nEMAIL;TYPE=INTERNET:${profile.email}\nURL:${profile.sitio}\nNOTE:Avatar=${currentMode}; Ubicación (Maps): ${profile.mapsUrl}\nEND:VCARD`;
      const blob = new Blob([vcf], {type:'text/vcard;charset=utf-8'});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = profile.nombre.replace(/\s+/g,'_') + '.vcf';
      document.body.appendChild(a); a.click(); a.remove();
      setTimeout(()=>URL.revokeObjectURL(a.href), 1000);
    });

    // Toggle de avatar + autodetección (si no hay foto: modo logo)
    const avatarEl = document.querySelector('.avatar');
    const photoBtn = document.getElementById('avatarPhoto');
    const logoBtn  = document.getElementById('avatarLogo');

    function setAvatar(mode){
      const isLogo = mode === 'logo';
      avatarEl.src = isLogo ? 'iso_grupoluna_azul@4x.png' : 'Imagen1.jpg';
      if(isLogo){
        avatarEl.style.borderRadius = '999px';
        avatarEl.style.objectFit = 'contain';
        avatarEl.style.background = '#ffffff';
        avatarEl.style.padding = '12px';
      }else{
        avatarEl.style.borderRadius = '18px';
        avatarEl.style.objectFit = 'cover';
        avatarEl.style.background = 'transparent';
        avatarEl.style.padding = '0';
      }
      photoBtn.classList.toggle('primary', !isLogo);
      logoBtn.classList.toggle('primary', isLogo);
      currentMode = mode;
      localStorage.setItem('avatarMode', mode);
    }

    async function photoExists(){
      return new Promise((resolve)=>{
        const img = new Image();
        img.onload = ()=> resolve(true);
        img.onerror = ()=> resolve(false);
        img.src = 'Imagen1.jpg?' + Date.now();
      });
    }

    if(photoBtn && logoBtn){
      photoBtn.addEventListener('click', (e)=>{ e.preventDefault(); setAvatar('photo'); });
      logoBtn.addEventListener('click',  (e)=>{ e.preventDefault(); setAvatar('logo');  });

      (async ()=>{
        const paramMode = normalizeMode(params.get('avatar'));
        const stored    = normalizeMode(localStorage.getItem('avatarMode'));
        if(paramMode){ setAvatar(paramMode); return; }
        if(stored){ setAvatar(stored); return; }
        // autodetecta foto; si no existe, usa logo
        const ok = await photoExists();
        setAvatar(ok ? 'photo' : 'logo');
      })();
    }
  
    const igBtn = document.getElementById('btnIG');
    const fbBtn = document.getElementById('btnFacebook');
    if (igBtn) { if (profile.instagram) igBtn.href = profile.instagram; else igBtn.remove(); }
    if (fbBtn) { if (profile.facebook)  fbBtn.href = profile.facebook;  else fbBtn.remove(); }
    
</script>
</body>
</html>
